<!DOCTYPE html>
<html>
  
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  

  <link rel="alternate" type="application/rss+xml" title="Simple IT ü§ò Rocks" href="http://simpleit.rocks/feed.xml">

  <!-- Fontawesome -->
  <link rel="stylesheet" href="/bower_components/font-awesome/css/font-awesome.min.css" type="text/css" media="screen" />

  <!-- Mermaid -->
  <link rel="stylesheet" href="/bower_components/mermaid/dist/mermaid.forest.css" type="text/css" media="screen" />

  <!-- Custom css -->
  <link rel="stylesheet" href="/css/main.css">

  
  <!-- Begin Jekyll SEO tag v2.1.0 -->
<title>Automated Deployment Of Jekyll Websites To Github Pages With A Git Push To Github - Simple IT ü§ò Rocks</title>
<meta property="og:title" content="Automated Deployment Of Jekyll Websites To Github Pages With A Git Push To Github" />
<meta name="description" content="Overview" />
<meta property="og:description" content="Overview" />
<link rel="canonical" href="http://simpleit.rocks/automated-deployment-of-jekyll-websites-to-github-pages-with-a-git-push-to-github/" />
<meta property="og:url" content="http://simpleit.rocks/automated-deployment-of-jekyll-websites-to-github-pages-with-a-git-push-to-github/" />
<meta property="og:site_name" content="Simple IT ü§ò Rocks" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2016-11-08T00:00:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@simpleitrocks" />
<meta name="twitter:creator" content="@marcanuy" />
<meta property="fb:app_id" content="1822851531277021" />
<script type="application/ld+json">
{"@context": "http://schema.org",
"@type": "BlogPosting",
"headline": "Automated Deployment Of Jekyll Websites To Github Pages With A Git Push To Github",
"datePublished": "2016-11-08T00:00:00+00:00",
"description": "Overview",
"url": "http://simpleit.rocks/automated-deployment-of-jekyll-websites-to-github-pages-with-a-git-push-to-github/"}</script>
<!-- End Jekyll SEO tag -->


  

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-1912030305535489",
    enable_page_level_ads: true
  });
</script>



</head>


  <body>

    

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-28572639-2', 'auto');
  ga('send', 'pageview');

</script>



    <header class="site-header">

  <!-- mermaid -->
  <script src="/bower_components/mermaid/dist/mermaid.min.js"></script>
  <script>mermaid.initialize({startOnLoad:true});</script>
  <!-- endmermaid -->

  <div class="mb-2 text-center">

    <a class="display-1" href="/" style="text-decoration: none">Simple IT ü§ò Rocks</a>

  </div>

  
  <div class="jumbotron jumbotron-fluid bg-inverse">
  <div class="container">
    
    
    
    
    
    <h1 class="title">Automated Deployment Of Jekyll Websites To Github Pages With A Git Push To Github </h1>
    
    
    <p class="lead">
	<small class="text-muted subtitle">Using Travis Continuous Integration</small>
	
	<br />
	<small class="text-muted subtitle">

	    <i class="fa fa-calendar text-muted" aria-hidden="true"></i>
	    <time class="text-muted" datetime="2016-11-08T00:00:00+00:00" itemprop="datePublished">Nov 8, 2016</time>
	</small>
	
    </p>
    
  </div>
</div>

  

</header>


    <div class="container-fluid">
      <header class="post-header">
  <div>
    <div class="breadcrumbs">
  <ol itemscope itemtype="http://schema.org/BreadcrumbList" class="list-/inline breadcrumb">

    
    
    
    


<li itemprop="itemListElement" itemscope
    itemtype="http://schema.org/ListItem"
    class="breadcrumb-item">
  
  <a itemscope itemtype="http://schema.org/Thing"
     itemprop="item" href="/">
    
    <i class="fa fa-home" aria-hidden="true"></i>
    

    Home
  </a>
  
  <meta itemprop="position" content="1" />
</li>

    
    

    
    
    
    
    
    
    
    


<li itemprop="itemListElement" itemscope
    itemtype="http://schema.org/ListItem"
    class="breadcrumb-item">
  
  <a itemscope itemtype="http://schema.org/Thing"
     itemprop="item" href="/docs">
    

    docs
  </a>
  
  <meta itemprop="position" content="2" />
</li>

    

    
    
    
    
    
    


<li itemprop="itemListElement" itemscope
    itemtype="http://schema.org/ListItem"
    class="breadcrumb-item">
  
  <a itemscope itemtype="http://schema.org/Thing"
     itemprop="item" href="/docs/ruby">
    

    ruby
  </a>
  
  <meta itemprop="position" content="3" />
</li>

    

    
    
    
    
    
    


<li itemprop="itemListElement" itemscope
    itemtype="http://schema.org/ListItem"
    class="breadcrumb-item">
  
  <a itemscope itemtype="http://schema.org/Thing"
     itemprop="item" href="/docs/ruby/jekyll">
    

    jekyll
  </a>
  
  <meta itemprop="position" content="4" />
</li>

    

    
    
    
    
    
    


<li itemprop="itemListElement" itemscope
    itemtype="http://schema.org/ListItem"
    class="breadcrumb-item">
  
  <a itemscope itemtype="http://schema.org/Thing"
     itemprop="item" href="/docs/ruby/jekyll/tutorials">
    

    tutorials
  </a>
  
  <meta itemprop="position" content="5" />
</li>

    

    
    
    
    
    
    


<li itemprop="itemListElement" itemscope
    itemtype="http://schema.org/ListItem"
    class="breadcrumb-item active">
  
  <span itemscope itemtype="http://schema.org/Thing"
       itemprop="item">
    

    <span itemprop="name">Automated Deployment Of Jekyll Websites To Github Pages With A Git Push To Github</span>
  </span>
  
  <meta itemprop="position" content="6" />
</li>

    

    
    
  </ol>
</div>

  </div>
</header>

<div class="post-content" itemprop="articleBody">
  <div class="row">

  <div class="col-md-3 site-sidebar">
    <div class="si-ad m-1 mx-auto">
  

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- simpleit_side_content -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-1912030305535489"
       data-ad-slot="5882730780"
       data-ad-format="auto"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
  
  
</div>

    
    <div class="sticky" style="position:sticky; top:10px">
      <div>
	<h4>Table of Contents</h4>
	<ul class="section-nav">
<li class="toc-entry toc-h2"><a href="#overview">Overview</a></li>
<li class="toc-entry toc-h2"><a href="#steps">Steps</a></li>
<li class="toc-entry toc-h3"><a href="#create-the-basic-travisyml-file">Create the basic .travis.yml file</a></li>
<li class="toc-entry toc-h3"><a href="#create-the-deployment-script-deploysh">Create the deployment script deploy.sh</a></li>
<li class="toc-entry toc-h3"><a href="#enable-travis-for-the-repository">Enable Travis for the repository</a></li>
<li class="toc-entry toc-h3"><a href="#generate-credentials">Generate credentials</a></li>
<li class="toc-entry toc-h4"><a href="#generating-a-new-ssh-key-to-use-with-travis">Generating a new SSH key to use with Travis</a></li>
<li class="toc-entry toc-h3"><a href="#add-deploy-key-to-github-keys">Add deploy key to GitHub keys</a></li>
<li class="toc-entry toc-h3"><a href="#encrypt-the-generated-deploy-key-with-the-travis-client">Encrypt the generated deploy key with the Travis client</a></li>
<li class="toc-entry toc-h3"><a href="#edit-travisyml-with-encryption-ids">Edit .travis.yml with encryption ids</a></li>
<li class="toc-entry toc-h3"><a href="#add-deploy-key-to-gitignore">Add deploy key to gitignore:</a></li>
<li class="toc-entry toc-h3"><a href="#adding-the-travis-button-to-github-readme">Adding the travis button to github readme</a></li>
<li class="toc-entry toc-h2"><a href="#references">References</a></li>
</ul>
      </div>
      <div>
	<div class="site-share pb-2">
  
  <ul class="share-buttons list-inline mb-1 text-center">
    <li class="list-inline-item">
      <div>
  <a class="twitter-share-button"
     href="https://twitter.com/share"
     data-url="http://simpleit.rocks/automated-deployment-of-jekyll-websites-to-github-pages-with-a-git-push-to-github/"
     data-via=""
     data-text=""
     data-related="marcanuy,{"username"=>"simpleitrocks"}"
     data-count="vertical">
    Tweet
  </a>
  <script>
   window.twttr=(function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],t=window.twttr||{};if(d.getElementById(id))return;js=d.createElement(s);js.id=id;js.src="https://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);t._e=[];t.ready=function(f){t._e.push(f);};return t;}(document,"script","twitter-wjs"));
  </script>
</div>

    </li>
    <li class="list-inline-item">
      <div>
  <!-- Place this tag in your head or just before your close body tag. -->
  <script src="https://apis.google.com/js/platform.js" async defer></script>

  <!-- Place this tag where you want the +1 button to render. -->
  <div class="g-plusone" data-size="tall"></div>
</div>

    </li>
    <li class="list-inline-item">
      <div>
  <div id="fb-root"></div>
  <script>(function(d, s, id) {
     var js, fjs = d.getElementsByTagName(s)[0];
     if (d.getElementById(id)) return;
     js = d.createElement(s); js.id = id;
     js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.0";
     fjs.parentNode.insertBefore(js, fjs);
   }(document, 'script', 'facebook-jssdk'));</script>

  <div class="fb-like" data-href="http://simpleit.rocks/automated-deployment-of-jekyll-websites-to-github-pages-with-a-git-push-to-github/" data-layout="box_count" data-action="like" data-show-faces="false" data-share="true"></div>
</div>

    </li>
  </ul>
  
</div>

      </div>
    </div>
    
  </div> <!-- end col -->

  <div class="col-md-8 site-content">

    
	<p class="lead">
	  
	</p>
    

    <div class="si-ad m-3 mx-auto">
  

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- simpleit_before_content -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-1912030305535489"
       data-ad-slot="2929264389"
       data-ad-format="auto"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>

  
</div>


    
<h2 id="overview">Overview</h2>

<p>A step-by-step guide to publish a Jekyll website automatically after
doing a <code class="highlighter-rouge">git push</code> to Github.</p>

<p>This guide makes use of <em>Github Pages</em>, <em>Jekyll</em> and <em>Travis CI</em>.</p>

<p>Github offers a free service called <a href="https://pages.github.com">Github Pages</a> to host regular
<abbr title="HyperTextMarkupLanguage">HTML</abbr> content hosted directly from users GitHub repositories.</p>

<p>It has a special, built-in support, for Jekyll, one of the most popular static
site generators, but you will have to use the Jekyll version currently
supported by Github (not always the latest one) and it does not allow
custom Jekyll plugins, because Jekyll is executed with the <code class="highlighter-rouge">--safe</code> flag.</p>

<blockquote class="blockquote" cite="https://jekyllrb.com/docs/plugins/">
  <p>GitHub Pages is powered by Jekyll. However, all Pages sites are
generated using the ‚Äìsafe option to disable custom plugins for
security reasons. Unfortunately, this means your plugins won‚Äôt work
if you‚Äôre deploying to GitHub Pages.</p>

  <p>You can still use GitHub Pages to publish your site, but you‚Äôll need
to convert the site locally and push the generated static files to
your GitHub repository instead of the Jekyll source files.</p>
  <footer class="blockquote-footer"><cite><a href="https://jekyllrb.com/docs/plugins/">Plugins on GitHub Pages</a></cite></footer>
</blockquote>

<p>A simple way to overcome these limitations is to manually build the
site before pushing to the repo or make use of automation tools like
Travis CI that will do this job for us in each <em>push</em> to Github.</p>

<h2 id="steps">Steps</h2>

<h3 id="create-the-basic-travisyml-file">Create the basic .travis.yml file</h3>

<p>Travis configuration is stored in <code class="highlighter-rouge">.travis.yml</code>, we will create a new
one with the following contents (adjust versions to your needs):</p>

<div class="language-yml highlighter-rouge"><pre class="highlight"><code><span class="s">language</span><span class="pi">:</span> <span class="s">ruby</span>
<span class="s">rvm</span><span class="pi">:</span>
<span class="pi">-</span> <span class="s">2.3.1</span>
<span class="s">before_script</span><span class="pi">:</span>
<span class="pi">-</span> <span class="s">npm install -g bower</span>
<span class="pi">-</span> <span class="s">bower install</span>
<span class="pi">-</span> <span class="s">chmod +x ./deploy.sh</span>
<span class="s">script</span><span class="pi">:</span> <span class="s">bash ./deploy.sh</span>
<span class="s">env</span><span class="pi">:</span>
  <span class="s">global</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">NOKOGIRI_USE_SYSTEM_LIBRARIES=true</span>
  <span class="pi">-</span> <span class="s">COMMIT_AUTHOR_EMAIL</span><span class="pi">:</span> <span class="s">me@marcanuy.com</span>
<span class="s">sudo</span><span class="pi">:</span> <span class="s">false</span>
</code></pre>
</div>

<h3 id="create-the-deployment-script-deploysh">Create the deployment script deploy.sh</h3>

<p>We will create the following <code class="highlighter-rouge">deploy.sh</code> script:</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="c">#!/bin/bash</span>
<span class="nb">set</span> -e <span class="c"># Exit with nonzero exit code if anything fails</span>

<span class="nv">SOURCE_BRANCH</span><span class="o">=</span><span class="s2">"master"</span>
<span class="nv">TARGET_BRANCH</span><span class="o">=</span><span class="s2">"gh-pages"</span>

<span class="k">function </span>doCompile <span class="o">{</span>
    <span class="nv">JEKYLL_ENV</span><span class="o">=</span>production bundle <span class="nb">exec </span>jekyll build -d out/
<span class="o">}</span>

<span class="c"># Pull requests and commits to other branches shouldn't try to deploy, just build to verify</span>
<span class="k">if</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$TRAVIS_PULL_REQUEST</span><span class="s2">"</span> !<span class="o">=</span> <span class="s2">"false"</span> -o <span class="s2">"</span><span class="nv">$TRAVIS_BRANCH</span><span class="s2">"</span> !<span class="o">=</span> <span class="s2">"</span><span class="nv">$SOURCE_BRANCH</span><span class="s2">"</span> <span class="o">]</span>; <span class="k">then
    </span><span class="nb">echo</span> <span class="s2">"Skipping deploy; just doing a build."</span>
    doCompile
    <span class="nb">exit </span>0
<span class="k">fi</span>

<span class="c"># Save some useful information</span>
<span class="nv">REPO</span><span class="o">=</span><span class="sb">`</span>git config remote.origin.url<span class="sb">`</span>
<span class="nv">SSH_REPO</span><span class="o">=</span><span class="k">${</span><span class="nv">REPO</span><span class="p">/https</span>:<span class="p">\/\/github.com\//git@github.com</span>:<span class="k">}</span>
<span class="nv">SHA</span><span class="o">=</span><span class="sb">`</span>git rev-parse --verify HEAD<span class="sb">`</span>

<span class="c"># Clone the existing gh-pages for this repo into out/</span>
<span class="c"># Create a new empty branch if gh-pages doesn't exist yet (should only happen on first deply)</span>
git clone <span class="nv">$REPO</span> out
<span class="nb">cd </span>out
git checkout <span class="nv">$TARGET_BRANCH</span> <span class="o">||</span> git checkout --orphan <span class="nv">$TARGET_BRANCH</span>
<span class="nb">cd</span> ..

<span class="c"># Clean out existing contents</span>
rm -rf out/<span class="k">**</span>/<span class="k">*</span> <span class="o">||</span> <span class="nb">exit </span>0

<span class="c"># Run our compile script</span>
doCompile

<span class="c"># Now let's go have some fun with the cloned repo</span>
<span class="nb">cd </span>out
git config user.name <span class="s2">"Travis CI"</span>
git config user.email <span class="s2">"</span><span class="nv">$COMMIT_AUTHOR_EMAIL</span><span class="s2">"</span>

<span class="c"># If there are no changes to the compiled out (e.g. this is a README update) then just bail.</span>
<span class="k">if</span> <span class="o">[</span> -z <span class="sb">`</span>git diff --exit-code<span class="sb">`</span> <span class="o">]</span>; <span class="k">then
    </span><span class="nb">echo</span> <span class="s2">"No changes to the output on this push; exiting."</span>
    <span class="nb">exit </span>0
<span class="k">fi</span>

<span class="c"># Commit the "changes", i.e. the new version.</span>
<span class="c"># The delta will show diffs between new and old versions.</span>
git add .
git commit -m <span class="s2">"Deploy to GitHub Pages: </span><span class="k">${</span><span class="nv">SHA</span><span class="k">}</span><span class="s2">"</span>

<span class="c"># Get the deploy key by using Travis's stored variables to decrypt deploy_key.enc</span>
<span class="nv">ENCRYPTED_KEY_VAR</span><span class="o">=</span><span class="s2">"encrypted_</span><span class="k">${</span><span class="nv">ENCRYPTION_LABEL</span><span class="k">}</span><span class="s2">_key"</span>
<span class="nv">ENCRYPTED_IV_VAR</span><span class="o">=</span><span class="s2">"encrypted_</span><span class="k">${</span><span class="nv">ENCRYPTION_LABEL</span><span class="k">}</span><span class="s2">_iv"</span>
<span class="nv">ENCRYPTED_KEY</span><span class="o">=</span><span class="k">${</span><span class="p">!ENCRYPTED_KEY_VAR</span><span class="k">}</span>
<span class="nv">ENCRYPTED_IV</span><span class="o">=</span><span class="k">${</span><span class="p">!ENCRYPTED_IV_VAR</span><span class="k">}</span>
openssl aes-256-cbc -K <span class="nv">$ENCRYPTED_KEY</span> -iv <span class="nv">$ENCRYPTED_IV</span> -in deploy_key.enc -out deploy_key -d
chmod 600 deploy_key
<span class="nb">eval</span> <span class="sb">`</span>ssh-agent -s<span class="sb">`</span>
ssh-add deploy_key

<span class="c"># Now that we're all set up, we can push.</span>
git push <span class="nv">$SSH_REPO</span> <span class="nv">$TARGET_BRANCH</span>
</code></pre>
</div>

<p>The script basically performs the following actions:</p>

<ol>
  <li>Create the <em>gh-pages</em> branch <code class="highlighter-rouge">git checkout --orphan gh-pages</code></li>
</ol>

<blockquote class="blockquote" cite="https://git-scm.com/docs/git-checkout">
  <p>Updates files in the working tree to match the version in the index
or the specified tree. If no paths are given, git checkout will also
update HEAD to set the specified branch as the current branch.</p>
  <footer class="blockquote-footer"> git checkout orphan flag in <cite><a href="https://git-scm.com/docs/git-checkout">git-checkout</a></cite></footer>
</blockquote>

<ol>
  <li>Generate the Jekyll build inside <code class="highlighter-rouge">out/</code> directory</li>
  <li>Commit and deploy generated files to <code class="highlighter-rouge">gh-pages</code> branch</li>
</ol>

<h3 id="enable-travis-for-the-repository">Enable Travis for the repository</h3>

<p>Sign in to Travis CI with your GitHub account.</p>

<p>Once you‚Äôre signed in, Travis will synchronize your repositories from
GitHub. Go to your profile page and enable Travis CI for the
repository you want to build.</p>

<h3 id="generate-credentials">Generate credentials</h3>

<p>We need to generate credentials to be able to publish the <code class="highlighter-rouge">gh-pages</code>
branch contents on GitHub
using
<a href="https://docs.travis-ci.com/user/encrypting-files/">Travis Automated Encryption</a>.</p>

<h4 id="generating-a-new-ssh-key-to-use-with-travis">Generating a new SSH key to use with Travis</h4>

<pre class="shell">
<samp>
<span class="shell-prompt">$</span> <kbd>ssh-keygen -t rsa -b 4096 -C "your_github_email@example.com"</kbd>
Generating public/private rsa key pair.
Enter file in which to save the key (/home/marcanuy/.ssh/id_rsa): <kbd>deploy_key</kbd>
Enter passphrase (empty for no passphrase): 
Enter same passphrase again: 
Your identification has been saved in deploy_key.
Your public key has been saved in deploy_key.pub.
The key fingerprint is:
SHA256:vn3O/NkfKHg2nb9p0J7yam72elUInAHa0MtGWbsZ048 me@marcanuy.com
The key's randomart image is:
+---[RSA 4096]----+
|        .o.=o+   |
|        .o=.* .  |
|       oo+o.oo.+ |
|       o+ o  oE o|
|       .S ooo o .|
|          .  o..o|
|           o o++o|
|            o=-*=|
|            =*xX*|
+----[SHA256]-----+
</samp>
</pre>

<h3 id="add-deploy-key-to-github-keys">Add deploy key to GitHub keys</h3>

<p>Add the generated <strong>public key</strong>: <code class="highlighter-rouge">deploy_key.pub</code> to your repository at
https://github.com/<your name="">/<your repo="">/settings/keys.</your></your></p>

<p>You can copy easily with <code class="highlighter-rouge">xclip</code> and then paste it in the keys textbox:</p>

<pre class="shell">
<samp>
<span class="shell-prompt">$</span> <kbd>xclip -sel clip &lt; deploy_key.pub</kbd>
</samp>
</pre>

<p><img class="img-fluid" alt="Responsive image" src="/assets/travis_add_deploy_key.png" /></p>

<p>Detailed steps are <a href="https://help.github.com/articles/adding-a-new-ssh-key-to-your-github-account/">in this Github guide</a>.</p>

<h3 id="encrypt-the-generated-deploy-key-with-the-travis-client">Encrypt the generated deploy key with the Travis client</h3>

<pre class="shell">
<samp>
<span class="shell-prompt">$</span> <kbd>travis encrypt-file deploy_key --add</kbd>
Detected repository as marcanuy/simpleit.rocks, is this correct? |yes| <kbd>yes</kbd>
encrypting deploy_key for marcanuy/emacside.com
storing result as deploy_key.enc
storing secure env variables for decryption

Make sure to add deploy_key.enc to the git repository.
Make sure not to add deploy_key to the git repository.
Commit all changes to your .travis.yml.
</samp>
</pre>

<h3 id="edit-travisyml-with-encryption-ids">Edit .travis.yml with encryption ids</h3>

<p>The previous step added the before_install section with the proper
command to decrypt the <code class="highlighter-rouge">deploy_key</code>, now we have to detect the
encription id and add an environment variable like: ` ENCRYPTION_LABEL: ‚Äú&lt;‚Ä¶. encryption label from previous step ‚Ä¶.&gt;‚Äù`</p>

<p>The encription id is the string between <code class="highlighter-rouge">$encrypted_</code> and <code class="highlighter-rouge">_key</code> in
the automatically added <code class="highlighter-rouge">before_install</code> line:</p>

<p>
openssl aes-256-cbc -K $encrypted_<span style="color:red">0c6d27255ccf</span>_key -iv $encrypted_0c6d27255ccf_iv -in deploy_key.enc -out deploy_key -d.
</p>

<p>In the previous case I will have to add the line <code class="highlighter-rouge">- ENCRYPTION_LABEL:
0c6d27255ccf</code>, the file <code class="highlighter-rouge">.travis.yml</code> will look like:</p>

<div class="language-yml highlighter-rouge"><pre class="highlight"><code><span class="s">env</span><span class="pi">:</span>
  <span class="s">global</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">ENCRYPTION_LABEL</span><span class="pi">:</span> <span class="s">0c6d27255ccf</span>
</code></pre>
</div>

<p>So the final <code class="highlighter-rouge">.travis.yml</code> is:</p>

<div class="language-yml highlighter-rouge"><pre class="highlight"><code><span class="s">language</span><span class="pi">:</span> <span class="s">ruby</span>
<span class="s">rvm</span><span class="pi">:</span>
<span class="pi">-</span> <span class="s">2.3.1</span>
<span class="s">before_script</span><span class="pi">:</span>
<span class="pi">-</span> <span class="s">npm install -g bower</span>
<span class="pi">-</span> <span class="s">bower install</span>
<span class="pi">-</span> <span class="s">chmod +x ./deploy.sh</span>
<span class="s">script</span><span class="pi">:</span> <span class="s">./deploy.sh</span>
<span class="s">env</span><span class="pi">:</span>
  <span class="s">global</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">NOKOGIRI_USE_SYSTEM_LIBRARIES=true</span>
  <span class="pi">-</span> <span class="s">COMMIT_AUTHOR_EMAIL</span><span class="pi">:</span> <span class="s">me@marcanuy.com</span>
  <span class="pi">-</span> <span class="s">ENCRYPTION_LABEL</span><span class="pi">:</span> <span class="s">0c6d27255ccf</span>
<span class="s">sudo</span><span class="pi">:</span> <span class="s">false</span>
<span class="s">before_install</span><span class="pi">:</span>
<span class="pi">-</span> <span class="s">openssl aes-256-cbc -K $encrypted_0c6d27255ccf_key -iv $encrypted_0c6d27255ccf_iv -in deploy_key.enc -out deploy_key -d</span>
</code></pre>
</div>

<h3 id="add-deploy-key-to-gitignore">Add deploy key to gitignore:</h3>

<p>In <code class="highlighter-rouge">.gitignore</code> add <em>deploy_key</em>:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>_site
.sass-cache
.jekyll-metadata
bower_components
deploy_key
deploy_key.pub
</code></pre>
</div>

<h3 id="adding-the-travis-button-to-github-readme">Adding the travis button to github readme</h3>

<p>In your project <code class="highlighter-rouge">README</code> file you can add the fancy Travis button with
the current status of the building, adding a similar code:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>[![Build Status](https://travis-ci.org/marcanuy/emacside.com.svg?branch=master)](https://travis-ci.org/marcanuy/emacside.com)
</code></pre>
</div>

<p>You can find your project button url following <a href="https://docs.travis-ci.com/user/status-images/">this guide</a>.</p>

<h2 id="references">References</h2>

<p>This guide is heavily based in <a href="https://gist.github.com/domenic/ec8b0fc8ab45f39403dd">Auto-deploying built products to gh-pages with
  Travis</a></p>

<p>Related articles:</p>

<ul>
  <li><a href="https://docs.travis-ci.com/user/encrypting-files/">https://docs.travis-ci.com/user/encrypting-files/</a></li>
  <li><a href="https://github.com/settings/keys">https://github.com/settings/keys</a></li>
  <li><a href="https://help.github.com/articles/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent/#generating-a-new-ssh-key">https://help.github.com/articles/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent/#generating-a-new-ssh-key</a></li>
  <li><a href="https://help.github.com/articles/adding-a-new-ssh-key-to-your-github-account/">https://help.github.com/articles/adding-a-new-ssh-key-to-your-github-account/</a></li>
  <li><a href="http://awestruct.org/auto-deploy-to-github-pages/">http://awestruct.org/auto-deploy-to-github-pages/</a></li>
  <li><a href="https://jekyllrb.com/docs/deployment-methods/">https://jekyllrb.com/docs/deployment-methods/</a></li>
  <li><a href="https://jekyllrb.com/docs/continuous-integration/">https://jekyllrb.com/docs/continuous-integration/</a></li>
</ul>



    



<footer class="author-footer">
    <div class="media" itemtype="http://schema.org/Person">
	<span itemprop="locationCreated contentLocation spatialCoverage" itemscope="itemscope" itemtype="http://schema.org/City" style="display:none"><span itemprop="name">Uruguay</span>
	</span>
	<link href="https://plus.google.com/118415138433063920612/posts" rel="author"/>
	<meta content="https://www.facebook.com/unix.root" property="article:author"/>
	<meta content="@marcanuy" name="twitter:creator"/>
	<meta content="https://plus.google.com/118415138433063920612/posts" name="DC.creator"/>
	<meta content="Marcelo Canina" name="author"/>
	
	<a class="media-left mx-2" href="http://marcanuy.com" itemprop="url" rel="author">
	    <img class="media-object rounded" alt="Marcelo Canina - Simple IT ü§ò Rocks" itemprop="image" src="https://www.gravatar.com/avatar/2ebdffd5ddb4a98b0cc77117503d2711?s=80"/>
	</a>
	<div class="media-body">
	    <h5 class="media-heading">
		<address class="author-info clear" id="author-info" itemprop="author creator" itemscope="" itemtype="http://schema.org/Person">
		    <span class="author-name" itemprop="name">Marcelo Canina</span>
		    <a class="a-social a-tw" href="https://twitter.com/marcanuy" itemprop="sameAs" target="_blank"><i class="fa fa-twitter-square"></i></a>
		    <a class="a-social a-gp" href="https://plus.google.com/118415138433063920612?rel=author" itemprop="url sameAs" rel="author" target="_blank"><i class="fa fa-google-plus-square"></i></a>
		    <a class="a-social a-ln" href="https://www.linkedin.com/in/marcelocanina" itemprop="sameAs" target="_blank"><i class="fa fa-linkedin-square"></i></a>
		    <a class="a-social a-email" href="mailto:me@marcanuy.com" itemprop="email sameAs" target="_blank"><i class="fa fa-envelope-o"></i></a>
		    <a class="a-social a-github" href="http://github.com/marcanuy" itemprop="github sameAs" target="_blank"><i class="fa fa-github"></i></a>
		    <a class="a-social a-stackexchange" href="http://stackexchange.com/users/1193189?tab=accounts" itemprop="stackexchange sameAs" target="_blank"><i class="fa fa-stack-exchange"></i></a>
		</address>
	    </h5>
	    <div class="text-muted">
		I'm Marcelo Canina, a developer from Uruguay. I build websites and web-based applications from the ground up and share what I learn here.
	    </div>
	</div>
    </div>
</footer>




    <div class="post-comments">
  

  <div id="disqus_thread"></div>
  <script>
    /**
    *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
    *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
    */
    /*
    var disqus_config = function () {
    this.page.url = '/automated-deployment-of-jekyll-websites-to-github-pages-with-a-git-push-to-github/';  // Replace PAGE_URL with your page's canonical URL variable
    this.page.identifier = 'simpleitrocks'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    */
    (function() {  // DON'T EDIT BELOW THIS LINE
    var d = document, s = d.createElement('script');
    
    s.src = '//simpleitrocks.disqus.com/embed.js';
    
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
    })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
  
  
  
</div>


    <div class="row">
      <div class="col-md-6">
	






<div class="post-same-category">
  <h4>Articles in this category</h4>
  <div class="list-group">

    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
      <a class="list-group-item list-group-item-action " href="/how-to-handle-adsense-in-a-jekyll-development-environment/">
      How To Handle Adsense In A Jekyll Development Environment
    </a>
    
    
    
    
    
    
      <a class="list-group-item list-group-item-action " href="/how-to-prevent-content-displaying-in-a-jekyll-development-environment/">
      How To Prevent Content Displaying In A Jekyll Development Environment
    </a>
    
    
    
    
    
    
      <a class="list-group-item list-group-item-action " href="/how-to-create-breadcrumbs-with-hierarchical-categories-in-jekyll/">
      How to implement breadcrumbs on a Jekyll site with nested categories
    </a>
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
      <a class="list-group-item list-group-item-action " href="/how-to-use-bower-scss-with-jekyll/">
      How To Use Bower Scss With Jekyll
    </a>
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
      <a class="list-group-item list-group-item-action active" href="/automated-deployment-of-jekyll-websites-to-github-pages-with-a-git-push-to-github/">
      Automated Deployment Of Jekyll Websites To Github Pages With A Git Push To Github
    </a>
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
      <a class="list-group-item list-group-item-action " href="/how-to-add-bootstrap-4-to-jekyll-the-right-way/">
      How To Add Bootstrap 4 To Jekyll The Right Way
    </a>
    
    
  </div>
</div>


	




      </div>
      <div class="col-md-5">
	
	
	<div class="si-ad m-1 mx-auto">
  

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- simpleit_after_content -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-1912030305535489"
       data-ad-slot="5104001581"
       data-ad-format="auto"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>

  
</div>

	
      </div>
    </div>
  </div> <!-- end col -->
</div>


</div>

    </div>

    <footer class="container-fluid site-footer py-3">
    <div class="container">
	<div class="row justify-content-between align-items-center">
	    <div class="col-4">
		<h2 class="footer-heading text-muted">Simple IT ü§ò Rocks</h2>
		<ul class="footer-nav px-0">
		    <li>
			<i class="fa fa-keyboard-o" aria-hidden="true"></i>Coded by <a href="http://marcanuy.com" rel="author">Marcelo Canina</a>
		    </li>
		    
		    <li>
			<i class="fa fa-twitter" aria-hidden="true"></i><a href="https://twitter.com/simpleitrocks"><span class="username">simpleitrocks</span></a>

		    </li>
		    
		    <li>
			<i class="fa fa-user" aria-hidden="true"></i><a href="/about">About</a>
		    </li>
		    <li>
			<i class="fa fa-search" aria-hidden="true"></i><a href="/search">Search</a>
		    </li>
		</ul>
	    </div>
	    <div class="col-4">
		<div class="text-muted">
		    <p>Clutter-free software concepts. Written on the go.
</p>
		</div>
	    </div>
	</div>
    </div>
</footer>
<div class="si-license bg-inverse">
  <div class="text-muted text-sm-center">
    <small>
      Except as otherwise noted, the content of this page is licensed under
      <a rel="license" class="text-info" href="https://creativecommons.org/licenses/by-nc/4.0/">
	<i class="fa fa-creative-commons" aria-hidden="true"></i> BY-NC 4.0
      </a>
    </small>
  </div>
</div>

<script src="/bower_components/jquery/dist/jquery.min.js"></script>
<script src="/bower_components/tether/dist/js/tether.min.js"></script>
<script src="/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>


  </body>

</html>
